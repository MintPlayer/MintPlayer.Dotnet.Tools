<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<UsingTask TaskName="GeneratePublicApiHashTask" AssemblyFile="$(MSBuildThisFileDirectory)MintPlayer.Verz.Targets.dll" />

	<Target Name="GeneratePublicApiHash" AfterTargets="Build">
		<GeneratePublicApiHashTask AssemblyPath="$(TargetPath)">
			<Output TaskParameter="ApiHash" PropertyName="PublicApiHash" />
		</GeneratePublicApiHashTask>

		<Message Text="Public API SHA256: $(PublicApiHash)" Importance="High" />

		<!-- Store the hash in a property -->
		<PropertyGroup>
			<ComputedApiHash>$(PublicApiHash)</ComputedApiHash>
		</PropertyGroup>

		<!-- Emit the hash into a file to embed in the package -->
		<WriteLinesToFile File="$(IntermediateOutputPath)PublicApiHash.txt" Lines="$(PublicApiHash)" Overwrite="true" />

		<ItemGroup>
			<None Include="$(IntermediateOutputPath)PublicApiHash.txt" Pack="true" PackagePath="build/" />
		</ItemGroup>
	</Target>
</Project>
